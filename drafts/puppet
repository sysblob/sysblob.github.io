# Puppet client

#### <span style="color: rgb(185, 106, 217);">Installing agent</span>

Steps to install Puppet client on Rocky/RHEL 8:

```bash
sudo rpm -Uvh https://yum.puppet.com/puppet7-release-el-8.noarch.rpm
```

```bash
sudo yum install puppet-agent
```

```bash
sudo /opt/puppetlabs/bin/puppet resource service puppet ensure=running enable=true
```

Puppet agent provides a script for adding its command suite to the PATH:

```bash
source /etc/profile.d/puppet-agent.sh
```

Or you can add it manually:

```bash
export PATH=/opt/puppetlabs/bin:$PATH
```

#### <span style="color: rgb(185, 106, 217);">Configuring the agent</span>

<span style="color: rgb(149, 165, 166);">Switch over to root</span>

```bash
sudo -i
```

<span style="color: rgb(149, 165, 166);">Fill in fqdn of foreman or puppet master. This basically creates an entry in <span style="color: rgb(185, 106, 217);">/etc/puppetlabs/puppet/puppet.conf</span></span>

```bash
puppet config set server puppetserver.example.com --section main
```

Begin the SSL connection

```bash
puppet ssl bootstrap
```

At this point check on the Puppet/Foreman server to accept the certificate. If you need to do it manually here are the commands for checking for a certificate and accepting it.

```bash
puppetserver ca list
```

```bash
sudo puppetserver ca sign --certname <name>
```